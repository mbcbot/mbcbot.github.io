<!DOCTYPE html>
<html lang="en" >
<head>
  <title>One Link</title>
  <meta name="author" content="Ashik saleem">
  <meta name="keywords" content="mbc, mbccet, mbcpeermade, s6, cse">
  <meta name="description" content="Say Adios to multiple links..">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap">
  <link rel="icon" href="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/160/lg/57/link-symbol_1f517.png">
  <link rel="stylesheet" href="css/ghost.css">
</head>

<body onload="bios()">
  <div id="screen"></div>
  <div id="header"></div>
  <div id="cockpit">
    <span id="count">-</span>
    <i id="close" class="material-icons" onclick="fuel=false;">close</i>
  </div>
  <div id="timeline"></div>

  <div id="overlay" onclick="closer()"></div>
    <div id="modal">
      <i id="modal-close" class="material-icons" onclick="closer()">close</i>
      <div id="modal-title"></div>
      <div id="modal-content"></div>
    </div>
  <script>
  var elinks;
  var fuel=true;
  var pipe=false;
  var pac,count_down,lux,sub,p;
  var q=0;

  var notif=false;

  var Today;
  var now = new Date();
  const t1 = new Date(2021,now.getMonth(),now.getDate(),9,50);
  const t2 = new Date(2021,now.getMonth(),now.getDate(),10,50);
  const t3 = new Date(2021,now.getMonth(),now.getDate(),11,50);
  const t4 = new Date(2021,now.getMonth(),now.getDate(),12,50);
  const t5 = new Date(2021,now.getMonth(),now.getDate(),14,30);

  const hex=["#000","#607d8b","#4caf50","#f44336","#9c27b0","#3f51b5","#2196f3","#fff"];

// Time Table
  const Sunday=["Daa","Sepm","Pom","Cd","Cn","Sunday"];
  const Monday=["Daa","Sepm","Pom","Cd","Cn","Monday"];
  const Tuesday=["Pom","Cn","Wt","Cd","Daa","Tuesday"];
  const Wednesday=["Wt","Cd","Sepm","Cn","Plc","Wednesday"];
  const Thursday=["Sepm","Cd","Daa","Wt","Pom","Thursday"];
  const Friday=["Cn","Ce","Daa","Sepm","Friday"];
  const Saturday=["Daa","Sepm","Pom","Cd","Cn","Saturday"];

  const weeks=[Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday];


  function bios(){
    // Check if links exist in storage.
    if(localStorage.getItem("OneLinks") == null){
      // Request links to store..
      // OneReq : Request flag

      if(localStorage.getItem("OneReq") == null){
        // Initial Run.
        localStorage.setItem("OneReq", "ok");
        window.location.replace('https://script.google.com/a/mbcpeermade.com/macros/s/AKfycbxW9FJiofU_4ArUpddBIbR0pfMPjPJ6BwZ7zttTJsHx9SesLL8/exec');

      }else{
        // Retreive GET parameters..
        if(window.location.href.split("links=")[1] == undefined || window.location.href.split("links=")[1] == ""){
          // 404. Request Again..
          window.location.replace('https://script.google.com/a/mbcpeermade.com/macros/s/AKfycbxW9FJiofU_4ArUpddBIbR0pfMPjPJ6BwZ7zttTJsHx9SesLL8/exec');
        }else{
          var links = window.location.href.split("links=")[1];
          localStorage.setItem("OneLinks",links);
          elinks = links.split("_");
          // console.log("Extracted eLinks : "+elinks);
          ignition();
        }
      }

    }else{
      // Read Stored Links..
      elinks = localStorage.getItem("OneLinks").split("_");
      // console.log("Stored eLinks : "+elinks);
      ignition();
    }
  }



  function ignition(){
    document.getElementById("screen").style.display="none";
    // Handle Saturday and Sunday 
    if(now.getDay() == 0 || now.getDay() == 6){
      fuel=false;     // Stop Auto-launch ðŸš€
      sub=Monday[0];  // Select First Period.
      document.getElementById("header").innerHTML="Monday<div id='dot'></div><span id='clk'>9:00 AM</span>";
      document.getElementById("timeline").innerHTML="<button id='spinner'></button><button class='fill'>"+Monday[0]+"</button><div class='wire'></div>";

      // Timeline-Painter ðŸ–Œ
      for(var i=1;i<5;i++){
        document.getElementById("timeline").innerHTML+="<button class='empty'>"+Monday[i]+"</button>";
        if(i != 4){ 
          document.getElementById("timeline").innerHTML+="<div class='wire'></div>";
        }
      }
      document.getElementById("cockpit").innerHTML="<i class='material-icons' onclick='view()'>segment</i><i id='help' class='material-icons' onclick='about()'>help_outline</i>";
    }else{
      // Handle Rest of the days [M-T-W-Th-F]
      document.getElementById("header").innerHTML=now.toLocaleString('en-us',{weekday:'long'})+"<div id='dot'></div><span id='clk'>"+now.toLocaleString('en-us',{hour:'numeric',minute:'numeric',hour12:true})+"</span>";

      if(now.getTime() < t1.getTime()){sub=weeks[now.getDay()][0];p=0;}
      else if(now.getTime() < t2.getTime()){sub=weeks[now.getDay()][1];p=1;}
      else if(now.getTime() < t3.getTime()){sub=weeks[now.getDay()][2];p=2;}
      else if(now.getTime() < t4.getTime()){sub=weeks[now.getDay()][3];p=3;}
      else if(now.getDay() !== 5 && now.getTime() < t5.getTime()){sub=weeks[now.getDay()][4];p=4;}
      else{
        // Class Finished :[
        // Auto-select Next-Day as default
        fuel=false;
        sub= weeks[now.getDay()+1][0];p=0;q=1;
        if(now.getDay() == 5){
          document.getElementById("header").innerHTML="Monday<div id='dot'></div><span id='clk'>9:00 AM</span>";
        }else{
          Today=weeks[now.getDay()+1];
          document.getElementById("header").innerHTML=Today[Today.length-1]+"<div id='dot'></div><span id='clk'>9:00 AM</span>";
        }
      }

      // Timeline-Painter ðŸ–Œ
      Today=weeks[now.getDay()+q];
      for(var i=0;i<Today.length-1;i++){
        if(i < p){
          document.getElementById("timeline").innerHTML+="<button class='fill' title='click to join' onclick='Mars(this)'>"+Today[i]+"</button>";pipe=true;
        }else if(i == p){
          document.getElementById("timeline").innerHTML+="<button id='spinner' title='click to join' onclick='Mars(this)'>"+Today[i]+"</button><button class='fill'>"+Today[i]+"</button>";pipe=false;
        }else{
          document.getElementById("timeline").innerHTML+="<button class='empty' title='click to join' onclick='Mars(this)'>"+Today[i]+"</button>";pipe=false;
        }
        // Create Inter-Connections (pipes)
        if(i != Today.length-2){
          if(pipe){
            document.getElementById("timeline").innerHTML+="<div class='wire pvc'></div>";
          }else{  
            document.getElementById("timeline").innerHTML+="<div class='wire'></div>";
          }
        }
      }
    }
    document.getElementById("timeline").innerHTML+="<div id='caption'>Redirecting in <span id='timer'>7</span> Seconds..</div>";

    daVinci(0); // Apply Theme ðŸŽ¨

    if(localStorage.getItem("One7") === null){
      notif=true;
      document.getElementById("modal-title").textContent="What's new";
      document.getElementById("modal-content").innerHTML="Bot Successfully updated to latest stable release.<br>Features :<br><ul><li>3x Faster.</li><li>Stores links in Local Storage of device itself.</li><li>Immediate Redirects.</li><li>Authuser and Auto delay.</li><li>Built-in Themes and more..</li></ul><br>Coming soon:<br><ul><li>Add to homescreen.</li><li>Port to PWA.</li></ul><br>- OUI-V7-01-2021 -";
      document.getElementById("modal").style.display="flex";
      document.getElementById("overlay").style.display="block";
      localStorage.setItem("One7","ok");
    }

    if(!notif){
      if(fuel){
        launch(); // Go for launch ðŸš€
      }else{
        scrub(); // Launch Delayed..
      }
    } 
  }


  function launch(){
    var clock=setInterval(function(){
      if(count_down>0){count_down--;}
      document.title = "Redirecting in "+count_down+" Seconds";
      document.getElementById("timer").textContent=count_down;
      document.getElementById("count").textContent=count_down;
      document.getElementById("count").style.animation="bulb .7s infinite";
      if(!fuel){
        clearInterval(clock); // Launch scrubbed â›”
        scrub();
      }
      if(count_down == 1){
        Mars("jezero");   // Off we go ðŸš€...
      }
    },700);
  }


  function view(){
    document.getElementById("modal-title").textContent="Classroom";
    document.getElementById("modal-content").innerHTML="<div class='cargo'><span class='clue'>DAA</span><b>Design And Analysis of Algorithms</b><span name='Daa' onclick='Phobos(this)' class='btn-x  hex-"+lux+"'>Join</span></div><div class='cargo'><span class='clue'>CD</span><b>Compiler Design</b><span name='Cd' onclick='Phobos(this)' class='btn-x  hex-"+lux+"'>Join</span></div><div class='cargo'><span class='clue'>CN</span><b>Computer Networks</b><span name='Cn' onclick='Phobos(this)' class='btn-x  hex-"+lux+"'>Join</span></div><div class='cargo'><span class='clue'>SEPM</span><b>Software Engineering and Project Management</b><span name='Sepm' onclick='Phobos(this)' class='btn-x  hex-"+lux+"'>Join</span></div><div class='cargo'><span class='clue'>POM</span><b>Principles of mangement</b><span name='Pom' onclick='Phobos(this)' class='btn-x  hex-"+lux+"'>Join</span></div><div class='cargo'><span class='clue'>WT</span><b>Web Technologies</b><span name='Wt' onclick='Phobos(this)' class='btn-x  hex-"+lux+"'>Join</span></div><div class='cargo'><span class='clue'>CE</span><b>Comprehensive exam</b><span name='Ce' onclick='Phobos(this)' class='btn-x  hex-"+lux+"'>Join</span></div><div class='cargo'><span class='clue'>PLCMNT</span><b>Placement and Training</b><span name='Plc' onclick='Phobos(this)' class='btn-x  hex-"+lux+"'>Join</span></div>";

    document.getElementById("modal").style.display="flex";
    document.getElementById("overlay").style.display="block";
  }

  function closer(){
    document.getElementById('modal').style.display='none';
    document.getElementById('overlay').style.display='none';
    if(notif){
      if(fuel){
        launch(); // Go for launch ðŸš€
      }else{
        scrub(); // Launch Delayed..
      }
    }
  }

  function about(){
    document.getElementById("modal-title").textContent="One Link";
    document.getElementById("modal-content").innerHTML="Introducing the All new Link Assistant, designed for subterranean homesick aliens to help manage the ever-growing mountain of links.<br><br> &nbsp; &nbsp; &nbsp; Crafted to save Mbcians from day-to-day dystopia of endless video lectures. Providing concrete links and meticulous redirects, Along with a relevant timeline of subjects of the day.<br><br>Beta Testers :<ul><li><a href='https://www.instagram.com/dr.retr0_o'>dr.retr0_o</a></li><li><a href='https://www.instagram.com/_.methuselah._'>_.methuselah._</a></li></ul><br>Source code :<br><ul><li><a href='https://github.com/mbcbot/mbcbot.github.io'>mbcbot/one-link.htm</a></li></ul><br>Version: 7.0.1<br>Release: 13-04-2021<br><br>Authuser : <input type='number' id='auth' class='blanks' onchange='authAdjust()' min='0' value='"+pac+"' max='5' disabled><br>Auto Delay : <input type='number' id='delay' class='blanks' onchange='countAdjust()' min='5' value='"+localStorage.getItem("OneCount")+"' max='17'> seconds<br><br>Theme: <div id='tile' class='hex-"+lux+" tile-"+lux+"'></div><input type='range' min='1' oninput='daVinci(1)' step='1' max='8' value="+lux+" id='slider' class='hex-"+lux+" line-"+lux+"'><br>";
    document.getElementById("modal").style.display="flex";
    document.getElementById("overlay").style.display="block";
  }


  function scrub(){
    document.getElementById("cockpit").innerHTML="<i class='material-icons' onclick='view()'>segment</i><i id='help' class='material-icons' onclick='about()'>help_outline</i>";
    document.getElementById("caption").innerHTML="Mbcbot Â© 2018 - 2022 | <a href='https://github.com/mbcbot/mbcbot.github.io'>Ver 7.0.1 </a>";
    document.getElementById("caption").style.fontSize="14px";
    document.title = "One Link";
    if(lux == 1 || lux == 8){
      document.getElementById("dot").style.background="#5bb75b";
      document.getElementById("spinner").style.borderTop="3px solid #5bb75b";
      document.getElementById("spinner").style.border="3px solid #5bb75b";
    }else{
      document.getElementById("spinner").style.borderTop="3px solid #fff";
    }
  }

  function  Phobos(caldera){
    for(var i=0;i<7;i++){
      document.getElementsByClassName("btn-x")[i].textContent="Join";
    }
    caldera.textContent="Joining..";
    lift_Off(caldera.getAttribute("name"));
  }


  function daVinci(x){

    if(x == 0){
      // Normal Boot =====
      // Choose Primary Account
      if(localStorage.getItem("OneAuth") === null){
        pac=1;
        localStorage.setItem("OneAuth", "1");
      }else{
        pac=localStorage.getItem("OneAuth");
      }

      // Initialise count down
      if(localStorage.getItem("OneCount") === null){
        count_down=7;
        localStorage.setItem("OneCount", "7");
      }else{
        count_down=localStorage.getItem("OneCount");
      }

      // Initialise Theme
      if(localStorage.getItem("OneTheme") === null){
        lux=8;
        localStorage.setItem("OneTheme", "8");

        if(document.getElementById("close")){document.getElementById("close").style.color="#da4f49";}
        document.getElementById("dot").style.background="#da4f49";
        document.getElementById("spinner").style.border="3px solid #da4f49";
        document.getElementById("spinner").style.borderTop="3px solid #000";
        document.getElementById("spinner").style.boxShadow="0px 0px 0 4px #000";
      }else{
        lux=localStorage.getItem("OneTheme");

        if(lux == 1 || lux == 8 ){
          if(document.getElementById("close")){document.getElementById("close").style.color="#da4f49";}
          document.getElementById("dot").style.background="#da4f49";
          document.getElementById("spinner").style.border="3px solid #da4f49";
          document.getElementById("spinner").style.borderTop="3px solid #000";
          document.getElementById("spinner").style.boxShadow="0px 0px 0 4px #000";
        }else{
          document.getElementById("spinner").style.borderTop="3px solid "+hex[lux-1];
        }
      }


    }else{
      // Theme Hot-reload
      lux=document.getElementById("slider").value;

      localStorage.setItem("OneTheme", lux);

      document.getElementById("tile").style.background=hex[lux-1]; 
      document.getElementById("slider").style.background=hex[lux-1];

      if(lux == 1){
        document.getElementById("dot").style.background="#5bb75b";
        document.getElementById("spinner").style.borderTop="3px solid #5bb75b";
        document.getElementById("spinner").style.border="3px solid #5bb75b";
      }else if(lux == 8){
        document.getElementById("dot").style.background="#5bb75b";
        document.getElementById("spinner").style.borderTop="3px solid #5bb75b";
        document.getElementById("spinner").style.border="3px solid #5bb75b";
        document.getElementById("spinner").style.boxShadow="0px 0px 0 4px #000";
        document.getElementById("slider").style.background="#000";
      }else{
        document.getElementById("dot").style.background="#fff";
        document.getElementById("spinner").style.borderTop="3px solid #fff";
        document.getElementById("spinner").style.border="3px solid #fff";
      }
    }
    // Normal Boot + Theme Hot-reload
    document.getElementById("header").style.background=hex[lux-1];
    document.getElementById("modal-title").style.background=hex[lux-1];  

    if(lux == 8){
      document.getElementById("header").style.color="#000";
      document.getElementById("cockpit").style.color="#000";
      document.getElementById("modal-title").style.color="#000";
      document.getElementById("modal-close").style.color="#000";

      var el1 = document.querySelectorAll(".pvc");
      for (var i = 0; i < el1.length; i++){el1[i].style.background="#000";}
      var el2 = document.querySelectorAll(".fill");
      for (var i = 0; i < el2.length; i++){el2[i].style.background="#000";el2[i].style.color="#fff";}

    }else{
      document.getElementById("header").style.color="#fff";
      document.getElementById("cockpit").style.color="#fff";
      document.getElementById("modal-title").style.color="#fff";
      document.getElementById("modal-close").style.color="#fff";

      document.getElementById("spinner").style.boxShadow="0px 0px 0 4px "+hex[lux-1];

      var el1 = document.querySelectorAll(".pvc");
      for (var i = 0; i < el1.length; i++){el1[i].style.background=hex[lux-1];}
      var el2 = document.querySelectorAll(".fill");
      for (var i = 0; i < el2.length; i++){el2[i].style.background=hex[lux-1];}
    }
  }

  function countAdjust(){
    if(document.getElementById("delay").value > 4 && document.getElementById("delay").value < 18){
      localStorage.setItem("OneCount", document.getElementById("delay").value);
    }else{
      alert("Value must be from 5 to 17");
    }
  }
  function authAdjust(){
    if(document.getElementById("auth").value > -1 && document.getElementById("auth").value < 6){
      pac=document.getElementById("auth").value;
      localStorage.setItem("OneAuth",pac);
    }else{
      alert("Value must be from 0 to 5");
    }
  }
  function Mars(crater){
    if(crater == "jezero"){
      lift_Off(sub);
    }else{
      // console.log("To: "+crater.textContent);
      lift_Off(crater.textContent);
    }
  }

  function lift_Off(tar){
    fuel=false;
    pac=1;
    switch(tar){
      case "Daa" : window.location.replace('https://meet.google.com/lookup/'+elinks[0]+'?authuser='+pac);break;
      case "Cd" : window.location.replace('https://meet.google.com/lookup/'+elinks[1]+'?authuser='+pac);break;
      case "Cn" : window.location.replace('https://meet.google.com/lookup/'+elinks[2]+'?authuser='+pac);break;
      case "Sepm" : window.location.replace('https://meet.google.com/lookup/'+elinks[3]+'?authuser='+pac);break;
      case "Pom" : window.location.replace('https://meet.google.com/lookup/'+elinks[4]+'?authuser='+pac);break;
      case "Plc" : window.location.replace('https://meet.google.com/lookup/'+elinks[5]+'?authuser='+pac);break;
      case "Wt" : window.location.replace('https://meet.google.com/lookup/'+elinks[6]+'?authuser='+pac);break;
      case "Ce" : window.location.replace('https://meet.google.com/lookup/'+elinks[7]+'?authuser='+pac);break;
      default : alert("Failed to parse link, Err_Code 032");
    }
  }
  </script> 
</body>
</html>
 <!-- Adios ðŸ‘‹ðŸ» -->
